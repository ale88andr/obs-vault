### Как работает HTTPS

Hypertext Transfer Protocol Secure (`HTTPS`) - это расширение HTTP, передающее зашифрованные данные используя Transport Layer Security (TLS). Если данные перехватываются в режиме онлайн, все, что получает злоумышленник — это зашифрованный двоичный код.

![[Pasted image 20250602094034.png]]
#### Как данные зашифровываются и расшифровываются

**Шаг 1** - Клиент (браузер) и сервер устанавливают `TCP` соединение.

**Шаг 2** -  Клиент (браузер) отправляет сообщение `client hello` серверу. Это сообщение содержит набор поддерживаемых клиентом алгоритмов шифрования(*cipher suites*) и последнюю версию `TLS` которую он поддерживает. Сервер отвечает сообщением `server hello` чтобы браузер знал, может ли он поддерживать алгоритмы шифрования и версию `TLS`. Затем сервер отправляет SSL-сертификат клиенту. Сертификат содержит открытый ключ, имя хоста, даты истечения срока действия и т. д. Клиент должен проверить сертификат сервера и решить доверять ему или нет.

**Шаг 3** - После проверки SSL-сертификата клиент создает сеансовый ключ и шифрует его с помощью открытого ключа сервера. Сервер получает зашифрованный сеансовый ключ  и расшифровывает его с помощью своего закрытого ключа.

**Шаг 4** -  Теперь, когда и клиент, и сервер имеют один и тот же сеансовый ключ (симметричное шифрование), зашифрованные данные передаются по защищенному каналу.

#### Почему HTTPS переключается на симметричное шифрование при передаче данных?

1. **Безопасность**: Асимметричное шифрование работает только в одну сторону. Это означает, что если сервер попытается отправить зашифрованные данные обратно клиенту, кто угодно сможет расшифровать данные, используя открытый ключ.
2. **Ресурсы сервера**: Асимметричное шифрование добавляет довольно много математических накладных расходов. Оно не подходит для передачи данных в длительных сеансах.

