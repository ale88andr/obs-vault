
**Сервис** - определяет, что делает сетевой уровень

**Интерфейс** - определяет как использовать возможности сетевого уровня

**Протокол** - как сетевой уровень реализует возможности (набор правил)

**Архитектура сети** - набор уровней и протоколов (интерфейсы не входят в архитектуру)

**Стек протоколов** - иерархически организованный набор протоколов, достаточный для организации сетевого взаимодействия

**Инкапсуляция** - включение сообщения вышестоящего уровня в сообщение нижестоящего уровня

# 1. Модели сети

## 1.1 OSI

Модель взаимодействия открытых систем (Open System Interconnection Reference Model), где открытая система - это система построенная в соответствии с открытыми требованиями

![[Pasted image 20250507111734.png]]

1. **Физический уровень** (Physical layer) - Занимается передачей битов по физическому каналу связи (основная задача - передача потока бит без искажений в соответствии с заданной частотой)
2. **Канальный уровень** (Data Link layer) - Организовывает сетевое взаимодействие внутри одного сегмента сети. (задачи: управление доступом к среде передачи данных, установление логического соединения, согласование скоростей, надежная передача и коррекция ошибок)
3. **Сетевой уровень** (Network layer) - Служит для объединения нескольких сетей в крупную составную сеть. (задачи: адресация, определение маршрута отправки пакетов в составной сети, согласование характеристик сетей)
4. **Транспортный уровень** (Transport layer) - Обеспечивает передачу данных между процессами на устройствах с требуемым уровнем надежности. Сетенезависимый уровень (напрямую соединяются процессы которые находятся  на отправителе и получателе)
5. **Сеансовый уровень** (Session layer) - Позволяет устанавливать сеансы связи
6. **Уровень представления** (Presentation layer) - Обеспечивает согласование синтаксиса и семантики передаваемых данных (форматы представления символов, чисел и т.п.), а так же шифрование и дешифрование(`TLS`)
7. **Прикладной уровень** (Application layer)  - Используется пользовательскими приложениями для передачи запросов/данных

На практике модель не используется(применяется в качестве общего языка для описания и сопоставления различных коммуникационных сетей), а применяется модель и стек протоколов `TCP/IP`.

## 1.2 TCP/IP

![[Pasted image 20250506171636.png]]

1. **Уровень сетевых интерфейсов** (Link layer) - взаимодействие с сетями разных технологий. Объединяет **Физический** и **Канальный** уровень модели `OSI`.
2. **Уровень межсетевого взаимодействия** (Network layer) - Совпадает с **Сетевым** уровнем модели `OSI`
3. **Транспортный уровень** (Transport layer) - Совпадает с **Транспортным** уровнем модели `OSI`
4. **Прикладной уровень** (Application layer) - Объединяет **Сеансовый**, **Прикладной** и **Уровень представления** модели `OSI`.

`TCP/IP` широко используется на практике

## 1.3 Стандарты 

Цель стандартизации сетей - обеспечить возможность работать вместе оборудованию и ПО различных производителей.

Стандарты технологий передачи данных `IEEE`, рабочая группа `802`:
- `IEEE 802.11` - беспроводные сети Wi-Fi
- `IEEE 802.3` - проводные сети Ethernet
- `IEEE 802.15.1` - персональные сети Bluetooth
- `IEEE 802.15.4` - беспроводные сети интернета вещей
- `IEEE 802.16` - беспроводные сети WiMax

Группа проектирования Интернет `IETF` - выпускает документы с описанием сетевых протоколов (`RFC` - Request for comments):
- `RFC 2616` - протокол HTTP
- `RFC 793` - протокол TCP
- `RFC 791` - протокол IP
- `RFC 792` - протокол ICMP
- `RFC 826` - протокол ARP

## 1.4. Организация сетей TCP/IP

### 1.4.1 Уровень сетевых интерфейсов (Link layer)

Самая популярная технология проводной сети - `Ethernet` в ней используются коммутаторы, которые используют **физическую (аппаратную) адресацию** `MAC`, чтобы определить кому передавать данные.

`MAC` адреса:
- используются для идентификации узлов сети Wi-Fi и Ethernet
- регламентируются стандартом `IEEE 802`
- формат адреса `6` байт(`48` бит)
- форма записи `1C-75-08-D2-46-45` (`IEEE`), `1C-75-08-D2-46-45` (`EITF`)
- каждый сетевой адаптер имеет встроенный MAC адрес
- MAC адрес в сети должен быть уникальным

### 1.4.2 Уровень межсетевого взаимодействия (Network layer)

Объединение сетей(подсетей) построенных по разным технологиям (например, Ethernet и Wi-Fi) посредством добавления в сеть **маршрутизатора** (router).

Одна из важнейших задач уровня - это поиск маршрута в составной сети через промежуточные устройства сети(маршрутизаторы)

На этом уровне используются глобальные сетевые адреса:
- не привязаны к сетевой технологии
- используются для уникальной идентификации компьютера в составной сети

**IP-адреса**:
- глобальные сетевые адреса протоколов TCP\IP
- формат записи - 4 десятичных числа от 0 до 255
- IP-адреса должны быть уникальны во всем мире

Распределением IP-адресов в мире занимается `IANA`, за регион России отвечает региональный регистратор `IANA` - `RIPE`.

### 1.4.3 Транспортный уровень (Transport layer)

Транспортный уровень - обеспечивает взаимодействие процессов устройств по сети

Адресация на транспортном уровне осуществляется с помощью **портов** - идентификатор процесса ОС на устройстве

**Порты**:
- число в диапазоне от `1` до `65535`
- адрес процесса на транспортном уровне
- каждое сетевой приложение имеет свой порт
- номера портов у приложений не повторяются
- формат записи 192.168.1.1 `:8080`

Протоколы транспортного уровня:
1. `TCP` (`Transmission Control Protocol`) - получает поток байт, делит её на части, передавая её по сети и обеспечивает гарантию передачи до получателя в правильном порядке
	- обеспечивает надежную передачу потока байтов
	- протокол управления передачей
	- устанавливает сетевое соединение
2. `UDP` (`User Datagram Protocol`)
	- Протокол дейтаграмм(коротких сообщений) пользователя
	- обеспечивает ненадежную передачу коротких сообщений
	- соединение не устанавливается

### 1.4.4 Прикладной уровень (Application layer)

Уровень взаимодействия сетевых приложений

На этом уровне работают протоколы совершающие обмен данными, ради которых строятся сети (`HTTP`, `HTTPS`, `DNS`, `SMTP` и т.д.)

Протоколы прикладного уровня не углубляются (изолированы) в то, как именно данные передаются по сети (как будто приложения на разных хостах передают данные напрямую друг другу)

### 1.4.5 Выводы

**Сетевое оборудование уровней TCP/IP**

| Уровень TCP/IP              | Сетевое оборудование                     |
| --------------------------- | ---------------------------------------- |
| Уровень сетевых интерфейсов | Точка доступа Wi-Fi, Ethernet коммутатор |
| Сетевой уровень             | Маршрутизатор                            |

**Адресация уровней TCP/IP**

| Уровень TCP/IP              | Адресация |
| --------------------------- | --------- |
| Уровень сетевых интерфейсов | МАС-адрес |
| Сетевой уровень             | IP-адрес  |
| Транспортный уровень        | Порт      |
| Уровень приложений*         | Протокол* |

## 1.5. Сетевой анализатор Wireshark

Главное окно программы

![[Pasted image 20250507104336.png]]

Пример передачи `HTTP` запроса на сервер `10.92.192.100:8000`:
- введем фильтр по протоколу `http` и найдем нужный пакет

![[Pasted image 20250507112539.png]]

- смотрим, что передается на разных уровнях `TCP/IP`

![[Pasted image 20250507113431.png]]

- смотрим как происходит инкапсуляция при передачи данных по сети:

Заголовок уровня сетевых интерфейсов
![[Pasted image 20250507113934.png]]
Заголовок уровня сети
![[Pasted image 20250507114108.png]]Заголовок транспортного уровня
![[Pasted image 20250507114146.png]]и т.д.

