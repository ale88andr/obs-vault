
**Файловой системой** называется способ представления информации на физическом носителей данных и часть операционной системы, предоставляющей средства для операций над файлами и каталогами.

![[Pasted image 20250825140154.png]]

### 1. Виртуальная файловая система

**VFS** - это виртуальная файловая система. Она предоставляет процессам из пользовательского пространства (userspace) возможность получать доступ к файлам и каталогам. Именно благодаря VFS мы можем добиться существующего сейчас уровня абстракции. Другими словами `VFS` делает системные вызовы независимыми от типа используемой файловой системы.

### 2. Имена устройств

В Linux есть файлы устройств, позволяющие обращаться с устройством
как с обычным файлом. Файлы устройств находятся в каталоге `/dev` 

Вот некоторые примеры файлов устройств:

- `/dev/sdx` - файл жесткого диска `SAТA/SCSI`;
- `/dev/sdxN` - файл устройства раздела на жестком диске, N - это номер раздела;
- `/dev/scdN` - файл устройства СD/DVD-привода;
- `/dev/mouse` - файл устройства мыши;
- `/dev/modem` - файл устройства модема (на самом деле является ссылкой на файл устройства `ttySn`):
- `/dev/ttySn` - файл последовательного порта, n - номер порта

В свою очередь, файлы устройств бывают двух типов: **блочные** и **символьные**. Обмен информации с блочными устройствами, например с жестким диском, осуществляется блоками информации, а с символьными - отдельными символами. Пример символьного устройства - последовательный порт.

### 3. Идентификаторы UUID

Файл `/etc/fstab` содержит список автоматически монтируемых файловых систем в виде идентификаторов `UUID`.

Соответствие между обычными и длинными именами можно просмотреть с помощью команды:

`ls -l /dev/disk/by-uuid/`

### 4. Корневая файловая система

В Linux существует понятие **корневой файловой системы**. Допустим, вы установили Linux в раздел с именем `/dev/sdaЗ` - в этом разделе и будет развернута корневая файловая система вашей Linuх-системы. Корневой каталог обозначается прямым слешем - `/`, т. е. для перехода в корневой каталог в терминале (или в консоли) нужно ввести команду `cd /`.

Но на жестком диске есть еще и другие разделы. Чтобы получить к ним доступ, вам нужно подмонтировать их к корневой файловой системе. После монтирования вы сможете обратиться к содержимому разделов через точку монтирования - назначенный вами при монтировании специальный каталог, например:

```
/mnt/cdrom
```

Обращение ко всем сменным носителям и другим накопителям, установленным в Linux-cиcтeмe, осуществляется через корневую файловую систему.

**Стандартные каталоги файловой системы**

- `/` - корневой каталог;
- `/bin` - стандартные программы Linux (cat, ер, ls, login и т. д.);
- `/boot` - каталог загрузчика, содержит образы ядра и Initrd, может содержать конфигурационные и вспомогательные файлы загрузчика;
- `/dev` - файлы устройств;
- `/etc` - конфигурационные файлы системы;
- `/home` - домашние каталоги пользователей;
- `/lib` - библиотеки и модули;
- `/lost+found` - восстановленные после некорректного размонтирования файловой системы файлы и каталоги;
- `/misc` - может содержать все что угодно, равно как и каталог `/opt`;
- `/mnt` - обычно содержит точки монтирования;
- `/ргос` - каталог псевдофайловой системы procfs, предоставляющей информацию о процессах;
- `/root` - каталог суперпользователя root;
- `/sbin` - каталог системных утилит, выполнять которые имеет право пользователь root;
- `/tmp` - каталог для временных файлов;
- `/usr` - пользовательские программы, документация, исходные коды программ и ядра;
- `/var` - постоянно изменяющиеся данные системы, например очереди системы печати, почтовые ящики, протоколы, замки и т. д.

**Монтирование и размонтирование**

Чтобы работать с какой-либо файловой системой, необходимо примонтировать ее к корневой файловой системе. Например, вставив в разъем USB флешку, нужно подмонтировать файловую систему флешки к корневой файловой системе - только так мы сможем получить доступ к файлам и каталогам, которые записаны на носитель.

При завершении работы системы (перезагрузке, выключении компьютера) размонтирование всех файловых систем выполняется автоматически.

Команда монтирования выглядит так:

```
mount [опции] <устройство> <точка монтирования>
```

Здесь точка монтирования - это каталог. через который будет осуществляться доступ к монтируемой файловой системе.

```shell
sudo mount /dev/scdO /mnt/cdrom
```

Для размонтирования файловой системы служит команда `umount`:

```shell
umount <устройство или точка монтирования>
```

### 4. Файлы устройств и их монтирование

Для Linux нет разницы между устройством и файлом. Вес устройства системы
представлены в корневой файловой системе как о6ычныс файлы. Например.
`/dev/fd0`, `/dev/sda` - жесткий диск. Файлы устройств хранятся в каталоге `/dev`.

**Жесткие диски и SSD**

Все дисковые устройства, вне зависимости от интерфейса подключения (Р АТA, SAТА, SCSI), называются `/dev/sdx`, где `х` - буква.

Рассмотрим ситуацию с жесткими дисками чуть подробнее. Пусть у нас есть устройство `/dev/sda`. На жестком диске, понятное дело, может быть несколько разделов. Предположим, что на диске имеются три раздела (логических диска), которые в Windows называются `С:`, `D:` и `Е:`. Диск `С:` обычно является загрузочным (активным), поэтому этот раздел будет записан в самом начале диска. Нумерация разделов жесткого диска в Linux начинается с `1`, и в большинстве случаев диску `С:` будет соответствовать имя `/dev/sda1` - первый раздел на первом жестком диске. Резонно предположить, что двум оставшимся разделам (`D:` и `Е:`) будут присвоены
имена `/dev/sda2` и `/dev/sdaЗ`.
