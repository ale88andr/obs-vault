# Настройка прокси в Astra linux

После установки Astra Linux не работает интернет при подключенном соединении, если выход в интернет осуществляется через прокси-сервер.

Необходимо в настройках системы прописать его параметры:

1) Создаем файл с root-правами и прописываем адрес прокси-сервера для `apt`.

```Shell
sudo nano /etc/apt/apt.conf.d/proxy
```

```
Acquire::https::Proxy "https://адрес-прокси:порт-прокси/"; 
Acquire::http::Proxy "http://адрес-прокси:порт-прокси/"; 
Acquire::ftp::Proxy "ftp://адрес-прокси:порт-прокси/"; 
Acquire::::Proxy "true";
```

Сохраняем в редакторе, и закрываем файл, возвращаясь в терминал.

2) После этого заработает обновление системы.

```Shell
sudo apt update
```

Убеждаемся, что связь с репозиторием появилась, и обновляемся.

```Shell
sudo apt upgrade
```

---

Однако, в браузерах интернет по прежнему не появляется.

Открываем файл `/etc/environment`

```Shell
sudo nano /etc/environment
```

И прописываем в нем глобальные переменные для прокси:

```
https_proxy=https://адрес-прокси:порт-прокси/ 
http_proxy=http://адрес-прокси:порт-прокси/ 
ftp_proxy=ftp://адрес-прокси:порт-прокси/
```

Сохраняем в редакторе, и перезагружаем систему.

---

Если интернет не заработал в браузере `chromium` или `chromium-gost`, то открываем файл `/etc/chromium/default` и прописываем там адрес прокси-сервера:

```
CHROMIUM_FLAGS="-proxy-server=адрес-прокси:порт-прокси"
```

## Исключение из прокси

Для исключения из прокси в файл `/etc/environment` добавляем строчку со списком адресов:

```
no_proxy="127.0.0.1, localhost, 192.168.0.0/24, domain.local"
```
