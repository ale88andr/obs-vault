
Репозиториями можно управлять в графическом режиме:

`Панель управления` -> `Программы` -> `Менеджер пакетов Synaptic`

![[Pasted image 20231024124235.png]]



Astra Linux 1.7 по умолчанию настроена на использование локальных репозиториев, и поэтому если предполагается ее использовать в общих целях то необходимо подкорректировать используемые репозитории.
Правим список основных репозиториев:

```shell
sudo nano /etc/apt/sources.list
```

### Основной репозиторий
```
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-main/ 1.7_x86-64 main contrib non-free
```

### Оперативные обновления основного репозитория
```
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-update/ 1.7_x86-64 main contrib non-free
```

### Базовый репозиторий
```
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-base/ 1.7_x86-64 main contrib non-free
```

### Расширенный репозиторий
```
deb https://download.astralinux.ru/astra/stable/1.7_x86-64/repository-extended/ 1.7_x86-64 main contrib non-free
```

### Расширенный репозиторий (компонент astra-ce) - используется при необходимости в установке дополнительного ПО, которое не прошло сертификацию!
```
deb https://dl.astralinux.ru/astra/stable/1.7_x86-64/repository-extended/ 1.7_x86-64 astra-ce
```

 Обновляем список пакетов:
 
```shell
sudo apt update
```

 Проверяем наличие в системе пакетов для работы с репозиториями:
 
```shell
sudo apt install -y apt-transport-https ca-certificates
```

 Далее стандартно обновляем систему:
 
```shell
sudo apt full-upgrade
```

 И для контроля можно дополнить так (последует перезагрузка!):
 
```shell
sudo astra-update -r -A && sudo reboot
```

Еще одно дополнение - если при прописывании прочих репозиториев (Debian и прочие внешние репозитории) появятся сообщения про отсутствующие ключи вида `112695A0E562B32A`, `54404762BBB6E853` и т.п., то необходимо зарегистрировать их:

```shell
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 112695A0E562B32A 54404762BBB6E853 DCC9EFBF77E11517 0E98404D386FA1D9 648ACFD622F3D138
```

Выше мы использовали официальные репозитории Astra Linux. Теперь подключим все еще официальные репозиторий от разработчиков Лаборатория 50 - https://lab50.net/ :

```shell
sudo nano /etc/apt/sources.list.d/lab50.list
```

`deb http://packages.lab50.net/alse/ alse17 main`

```shell
sudo nano /etc/apt/sources.list.d/security.list
```

`deb http://packages.lab50.net/alse/ alse17-security main contrib non-free`

 Убеждаемся что wget установлен в системе:
 
```shell
sudo apt install -y wget
```

 Ключ для lab50 устанавливаем напрямую:
 
```shell
wget -qO - http://packages.lab50.net/lab50.asc | sudo apt-key add -
sudo apt update
sudo apt install -y lab50-archive-keyring
sudo apt full-upgrade
```

Если есть необходимость в использовании пакетов которых нет в Astra Linux, или же если требуются свежие версии пакетов, то тогда подключаем репозитории от сообщества Debian:

>Внимание! Не забываем что последующие репозитории уже ни в коей мере не гарантируют чистоту своего кода, так как это свободное ПО написанное в том числе обычными людьми со всего мира, среди которых увы но встречаются лица у которых только одна цель - навредить другим!

*Примечание - Для облегчения себе жизни устанавливаем пакеты:

```shell
sudo apt install -y debian-archive-keyring dirmngr
```

Подключаем основной для Астра SE 1.7 репозиторий Debian Buster (он же Debian 10):

```shell
sudo nano /etc/apt/sources.list.d/buster.list
```

```
deb http://deb.debian.org/debian/ buster non-free contrib main  
deb-src http://deb.debian.org/debian/ buster main contrib non-free 

deb http://deb.debian.org/debian/ buster-updates main contrib non-free 
deb-src http://deb.debian.org/debian/ buster-updates main contrib non-free 

deb http://security.debian.org/debian-security/ buster/updates main contrib non-free 
deb-src http://security.debian.org/debian-security/ buster/updates main contrib non-free
```

Подключаем устаревший но пока еще актуальный репозиторий Debian Stretch (Debian 9):

```shell
sudo nano /etc/apt/sources.list.d/stretch.list
```

```
deb http://deb.debian.org/debian/ stretch non-free contrib main   
deb-src http://deb.debian.org/debian/ stretch non-free contrib main   

deb http://deb.debian.org/debian/ stretch-updates non-free contrib main  
deb-src http://deb.debian.org/debian/ stretch-updates non-free contrib main  

deb http://security.debian.org/debian-security/ stretch/updates non-free contrib main   
deb-src http://security.debian.org/debian-security/ stretch/updates non-free contrib main
```

### После прописывания всех необходимых системе репозиториев выполняем стандартное обновление системы:

```shell
sudo apt update && sudo apt full-upgrade
```

### Для контроля можно сделать и так (последует перезагрузка системы!):

```shell
sudo astra-update -r -A && sudo reboot
```






