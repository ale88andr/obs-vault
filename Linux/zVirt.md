В основе `zVirt` - Open Source платформа oVirt.

редакции `zVirt`:
- Базовая
	Кроме базовых функций включает:
	- SDN базовый: создание изолированных сетей, управление внутренней адресацией, маршрутизация трафика, функция подключения к внешней сети.
	- Конвертер с `VMware`.
- Расширенная
	Включает все функции базовой редакции плюс:
	-	SDN расширенный: управление межсетевым доступом (по портам, протоколам, сетям), микросегментация.
	- Репликация и Disaster Recovery.
	- Кластер доменов хранения.
	- Управление репликацией на уровне СХД `YADRO TATLIN.UNIFIED` и `Huawei Dorado`.
	- Планы восстановления ВМ, реплицируемых на уровне СХД.

## Терминология

**Центр данных** - Контейнер самого высокого уровня для всех физических и логических ресурсов в управляемой виртуальной среде. Это набор кластеров, доменов хранения и сетей.

**Кластер** - Набор физических хостов, которые рассматриваются как пул ресурсов для виртуальных машин. Хосты в кластере используют одну и ту же сетевую инфраструктуру и хранилище.

**Хост** - Физический или виртуальный сервер, на котором работает одна или несколько виртуальных машин. Хосты сгруппированы в кластеры.

**Хост с ролью Hosted Engine** - Хост, на котором установлены пакеты Hosted Engine, обеспечивающие возможность размещения виртуальной машины с Менеджером управления (ВМ HostedEngine)

**Стандартный хост** - Хост, на котором не может выполняться виртуальная машина HostedEngine

**Standalone хост** - Физический сервер или виртуальная машина, на которой установлен Менеджер управления в архитектуре развёртывания Standalone. Архитектура развертывания `Standalone` предполагает развертывание баз данных и сервисов Менеджера управления на физическом сервере.

**Менеджер пула хранения SРМ** - Роль, назначенная одному хосту в центре данных. Хост SPM обладает исключительным правом вносить все изменения в метаданные структуры домена хранения.

**Менеджер управления Engine** - Это Java-приложение на базе `Wildfly`, которое работает как веб-сервис.
Менеджер управления обеспечивает централизованное управление и мониторинг ресурсов среды виртуализации, а также балансировку нагрузки на вычислительные ресурсы.

**Виртуальная машина HostedEngine** - Специальная виртуальная машина, на которой установлен менеджер управления в архитектуре развертывания HostedEngine.

**Домен хранения** - Логический объект, содержащий автономный репозиторий образов. Каждый домен хранения используется для хранения виртуальных дисков и/или образов ISO, а также для импорта и экспорта образов виртуальных машин.

**Виртуальная машина** - Это программная система, которая эмулирует аппаратное обеспечение компьютера и выполняет программы для гостевой операционной системы на хосте.

**Пул виртуальных машин** - Это группа виртуальных машин, клонированных из одного шаблона, которые любой пользователь в определенной группе может использовать по запросу.

**Шаблон** - Представляет собой модель виртуальной машины с предопределенными настройками. Виртуальная машина, созданная на основе определенного шаблона, получает настройки шаблона.

**Снимок** - Представление операционной системы виртуальной машины и всех ее приложений в определенный момент времени. Его можно использовать для сохранения настроек виртуальной машины перед обновлением или перед установкой новых приложений.

### Интерфейсы доступа

**Портал администрирования** - Используется для управления всеми административными ресурсами в среде
**Пользовательский портал** - Имеет ограниченные разрешения на управление ресурсами виртуальной машины и предназначен для конечных пользователей.
**Портал мониторинга** - Предоставляет доступ к отчетам, созданным на основе данных, собранных из базы данных Data Warehouse
**Портал Keycloak** - Используется для управления пользователями, их учетными данными и парольными политиками.
**REST API** - Используется для автоматизации задач администрирования

### Компоненты

![[Pasted image 20260209143558.png]]

**Менеджер управления** - это комплекс файлов конфигураций, баз данных и сервисов, предназначенных для хранения состояния и управления ресурсами среды виртуализации zVirt.

![[Pasted image 20260209143734.png]]

**Хосты** (или гипервизоры), представляют собой физические или виртуальные серверы, на которых работают виртуальные машины. На хосте работает оптимизированная среда исполнения zVirt Node.

**Способы доступа к хранилищам**

 - NFS
 - GlusterFS
 - POSIX-совместимые хранилища
 - Локальные хранилища
 - iSCSI
 - FCP

# Архитектура Hosted Engine

![[Pasted image 20260209144428.png]]

Архитектура развертывания Hosted Engine предполагает развертывание баз данных и сервисов Менеджера управления внутри специальной виртуальной машины - ВМ HostedEngine.

Минимальная конфигурация среды требует наличия:
- Одного сервера, который будет выполнять роль хоста (гипервизора). На нем будет запускаться процедура развертывания Менеджера управления.
- Внешней СХД, подготовленной для подключения к среде `zVirt`.

# Архитектура Standalone

![[Pasted image 20260209144623.png]]

Архитектура развертывания Standalone предполагает развертывание баз данных и сервисов Менеджера управления на физическом сервере.

Минимальная конфигурация среды требует наличия:
-	Сервера, который будет выполнять роль Standalone хоста.
-	Сервера, который будет добавлен в среду в качестве гипервизора.
-	Внешней СХД, подготовленной для подключения к среде zVirt.

Рекомендуемая схема разбиения хранилища:
- /(root) - 55 ГБ
- /home - 1 ГБ
- /tmp - 1 ГБ
- /boot - 1 ГБ
- /var - 15 ГБ
- /var/crash - 10 ГБ
- /var/log/audit - 2 ГБ
- swap - 1 ГБ

